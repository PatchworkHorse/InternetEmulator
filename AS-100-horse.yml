networks: 
  backhaul-border-kitty-city:
    driver: bridge
    internal: true
    ipam:
      config:
        - subnet: 10.10.0.0/29

  kitty-city-customers:
    driver: bridge
    internal: true
    ipam:
      config:
        - subnet: 216.177.10.0/24

services:

### Routers ###
  horse-border-01: 
    extends: 
      file: router-templates.yml
      service: border-router
    profiles: ["horse-as", "all-isps"]
    hostname: horse-border-01
    container_name: horse-border-01
    environment:
      - ISP_NAME=Horse
      - ASN=100
    networks:
      horse-duck-peering: # eth0 - Peering to Duck-ISP
        priority: 100  # Lower priority = eth0
      backhaul-border-kitty-city: # eth1 - Backhaul to interior router
        priority: 200  # Higher priority = eth1
        
  kitty-city-gateway-01:
    extends:
      file: router-templates.yml
      service: interior-router
    profiles: ["horse-as", "all-isps"]
    hostname: kitty-city-01
    container_name: kitty-city-01
    environment:
      - ISP_NAME=Horse
    networks:
      backhaul-border-kitty-city:  #eth0 - Backhaul to border router
        priority: 100

### Customers ###
  kitty-city-customer-01:
    extends:
      file: customer-templates.yml
      service: isp-customer
    profiles: ["horse-as", "all-isps"]
    hostname: kitty-city-customer-01
    container_name: kitty-city-customer-01
    environment:
      - ISP_NAME=Horse
    networks:
      kitty-city-customers:
        ipv4_address: 216.177.10.54