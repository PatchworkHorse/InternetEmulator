# Axiom Global Transit
# AS-65801
# 100.100.0.0/18 | 2001:db8:101::/36

# Initial IP plan:
# ATG BOS lo: 100.100.0.1/32
# ATG BOS <-> SLT MHT: 100.100.101.1/30
# ATG BOS <-> ATG NYC: 100.100.1.1/30
# ATG NYC lo: 100.100.2.1/32


networks: 
  bh_atg-bos-bdr-01__slt-mht-bdr-01:
    driver: macvlan
    internal: true
    labels: 
      type: "backhaul"
      notes: "Peering StrataLink Telecom (BOS <-> MHT)"

  bh_atg-bos-bdr-01__atg-nyc-bdr-01:
    driver: macvlan
    internal: true
    labels: 
      type: "backhaul"
      notes: "Internal backhaul (BOS <-> NYC)"

services:
  atg-bos-bdr-01:
    extends: 
      file: router-templates.yml
      service: router-base
    profiles: ["as-65801", "agt-as", "all-isps"]
    hostname: atg-bos-bdr-01
    container_name: atg-bos-bdr-01
    environment:
      - ISP_NAME=Axiom Global Transit
      - ASN=65801
      - ROUTER_TYPE=border
    networks:
      bh_atg-bos-bdr-01__atg-nyc-bdr-01:
        interface_name: eth0
      bh_atg-bos-bdr-01__slt-mht-bdr-01:
        interface_name: eth1

  atg-nyc-bdr-01:
    extends: 
      file: router-templates.yml
      service: router-base
    profiles: ["as-65801", "agt-as", "all-isps"]
    hostname: atg-nyc-bdr-01
    container_name: atg-nyc-bdr-01
    environment:
      - ISP_NAME=Axiom Global Transit
      - ASN=65801
      - ROUTER_TYPE=border
    networks:
      fabric_nyc_ix_1:
        interface_name: eth0
      bh_atg-bos-bdr-01__atg-nyc-bdr-01:
        interface_name: eth1
    